# 技术路线图规划文档

## 项目概况

**项目名称**：多智能体协同的空间感知图像恢复方法研究

**核心研究内容**：
1. 空间感知退化分析（感知）
2. 层级多智能体协同规划（决策）
3. 轨迹蒸馏与轻量部署（部署）

## 视觉/结构学习点

基于对模型库的分析，本项目技术路线图采用 **layered-pipeline（分层流水线）** 布局，原因如下：

1. **叙事结构匹配**：项目本身具有清晰的"感知→规划→执行→蒸馏"流程，layered-pipeline 能直观呈现这种纵向推进关系
2. **模块化表达**：三阶段研究内容可分层展示，每阶段内部横向展开具体方法模块
3. **数据流清晰**：退化图像→空间退化图→恢复结果→轻量模型的数据流向一目了然

参考 model-03 和 model-06 的结构特点：
- 纵向主链清晰（读者能一眼从上到下读完主线）
- 并行模块用横向分层/容器承载
- 输出/交付在底部汇总

## 路线图整体结构设计

### 布局参数

- **布局模板**: `layered-pipeline`
- **方向**: 自上而下（top-to-bottom）
- **阶段数**: 4 个主要阶段（输入层 → 感知层 → 决策层 → 部署/输出层）
- **配色方案**: `academic-blue` 学术蓝为主，三阶段用不同色调区分

### 阶段与节点设计

**阶段 1：输入与预处理（Input Layer）**
- 节点：复杂退化图像输入（混合退化：噪声/模糊/雾霾/雨线）
- 位置：最顶层

**阶段 2：空间感知退化分析（Perception Layer）** —— 对应研究内容1
- 节点 2.1：SAM 语义分割 → 区域划分 {R_i}
- 节点 2.2：VLM 退化分析 → 区域级退化识别 (d_i, s_i)
- 节点 2.3：空间上下文聚合 → 空间退化图 M
- 配色：蓝色系 (primary)

**阶段 3：层级多智能体协同规划（Decision Layer）** —— 对应研究内容2
- 节点 3.1：全局调度器 → 退化先验排序（场景→成像→压缩逆序）
- 节点 3.2：区域专家 → 工具链选择与参数优化
- 节点 3.3：质量反馈迭代 → 一致性约束融合
- 配色：橙/绿色系 (secondary)

**阶段 4：轨迹蒸馏与轻量部署（Deployment Layer）** —— 对应研究内容3
- 节点 4.1：离线轨迹收集 → 决策数据集 T
- 节点 4.2：多任务蒸馏训练 → 轻量路由网络 Φ_ω
- 节点 4.3：端侧实时推理 → 高质量恢复输出
- 配色：绿色系 (auxiliary/decision)

**阶段 5：输出与成果（Output Layer）**
- 节点：高质量恢复图像 + 论文/专利成果
- 位置：最底层

### 关键节点属性说明

| 节点 | kind | 说明 |
|-----|------|------|
| 空间退化图 M | critical | 核心中间表示，连接感知与决策层 |
| 全局调度器 | decision | 决策节点，体现退化先验知识 |
| 区域专家 | secondary | 并行执行节点 |
| 轨迹数据集 T | critical | 知识蒸馏的数据基础 |
| 轻量路由网络 | critical | 最终部署产物 |

### 风险与备选方案节点

- 分割质量下降 → RobustSAM 回退机制（risk 节点）
- 蒸馏性能偏差 → 困难样本再训练（risk 节点）

### 术语一致性

确保节点命名与正文一致：
- "空间退化图" 而非 "退化图"
- "区域专家" 而非 "局部专家"
- "轨迹蒸馏" 而非 "知识蒸馏"
- "轻量路由网络" 而非 "轻量模型"

## 连接关系

1. 纵向主链：输入图像 → SAM分割 → VLM分析 → 空间退化图 → 全局调度 → 区域专家 → 融合输出 → 轨迹收集 → 蒸馏训练 → 轻量部署 → 恢复图像
2. 横向协作：全局调度器 ↔ 多个区域专家（双向箭头）
3. 反馈环路：区域专家 → 质量评估 → 参数优化（循环箭头）
4. 并行处理：多个区域专家并行执行（水平排列）
